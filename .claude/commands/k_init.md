# Kaggle コンペ用リポジトリ初期化

あなたは経験豊富なKaggleデータサイエンティストです。指定されたコンペ用の最適化されたリポジトリを作成し、優勝に向けた完璧な作業環境を初期化してください。

## 使用方法
```
/k_init [competition-name]
```

## TODO作成支援のための実行構造

このコマンドは**7つの明確なタスクステップ**で構成されています。各ステップは独立してTODOリストに追加でき、前のステップの完了が次のステップの前提条件となります。

---

## ステップ1: コンペ名検証とディレクトリ構造作成

**タスク内容**: 
- Kaggle APIでコンペ名の有効性を確認
- `competitions/[competition-name]/` ディレクトリを作成
- 基本ディレクトリ構造を生成

**実行コマンド**:
```bash
kaggle competitions list | grep [competition-name]
mkdir -p competitions/[competition-name]/{notebooks,data,insights,cache/discussions,.claude/commands}
```

**成功条件**: 
- コンペが存在することを確認
- 全ディレクトリが正常に作成される

**TODO作成のポイント**: このステップは単一タスクとして作成可能

---

## ステップ2: uv環境構築と基本依存関係インストール

**タスク内容**:
- コンペディレクトリ内でuv環境を初期化
- 必要な基本パッケージをインストール

**実行コマンド**:
```bash
cd competitions/[competition-name]
uv init --python 3.11
uv add pandas scikit-learn matplotlib seaborn jupyter kaggle ruff nbstripout
```

**成功条件**: 
- uv環境が正常に作成される
- 全パッケージが正常にインストールされる

**TODO作成のポイント**: このステップも単一タスクとして管理可能

---

## ステップ3: Kaggleデータセットダウンロードと展開

**タスク内容**:
- Kaggle APIを使用してコンペデータをダウンロード
- データファイルを適切に展開・配置

**実行コマンド**:
```bash
cd competitions/[competition-name]
uv run kaggle competitions download -c [competition-name] -p ./data/
cd data && unzip [competition-name].zip && rm [competition-name].zip
```

**成功条件**: 
- データファイルが正常にダウンロードされる
- 展開されたファイルが data/ ディレクトリに配置される

**TODO作成のポイント**: ダウンロードと展開を個別タスクとして分割も可能

---

## ステップ4: テンプレートファイルのコピーと設定

**タスク内容**:
- マザーリポジトリのテンプレートファイルをコピー
- コンペ名に応じてファイル内容を調整

**実行指示**:
- `templates/custom-slash-commands/` から `.claude/commands/` へコピー
- `templates/pyproject.toml.template` をコピーしてプロジェクト名を調整
- `templates/.pre-commit-config.yaml` をコピー

**成功条件**: 
- 全テンプレートファイルが正常にコピーされる
- pyproject.toml内のプロジェクト名が正しく置換される

**TODO作成のポイント**: 各テンプレートファイルを個別タスクとして管理可能

---

## ステップ5: 開発環境の最終セットアップ

**タスク内容**:
- 依存関係の同期
- pre-commitフックの有効化
- 開発ツールの設定確認

**実行コマンド**:
```bash
cd competitions/[competition-name]
uv sync
uv run pre-commit install
```

**成功条件**: 
- 全依存関係が正常に同期される
- pre-commitフックが有効化される

**TODO作成のポイント**: セットアップと検証を分離可能

---

## ステップ6: コンペ基本情報のWebSearch調査

**タスク内容**:
- WebSearchでコンペの詳細情報を収集
- 評価指標、データセット概要、ルールを調査
- 類似コンペの勝利解法パターンを調査

**調査項目**:
- コンペの目的と評価指標
- データセットの構造と特徴
- 外部データ使用可否とルール
- 過去の類似コンペの勝利手法

**成功条件**: 
- 各調査項目について十分な情報が収集される
- README生成に必要な情報が揃う

**TODO作成のポイント**: 各調査項目を個別タスクとして分割推奨

---

## ステップ7: 優勝戦略README生成

**タスク内容**:
- ステップ6の調査結果を基に包括的なREADMEを作成
- 2024年最新の勝利戦略を含む戦略ガイドを生成

**README構成**:
1. **コンペ概要**: 目的、評価指標、データセット概要
2. **勝利戦略**: 特徴量エンジニアリング、アンサンブル、CV戦略
3. **実行ロードマップ**: 週次の具体的作業計画
4. **技術スタック**: GPU加速、最新アーキテクチャの活用計画
5. **リソース管理**: 時間・計算資源の効率的活用方針

**成功条件**: 
- 全セクションが調査結果に基づいて記載される
- 実行可能な具体的戦略が含まれる

**TODO作成のポイント**: README各セクションを個別タスクとして管理推奨

---

## 実行指示

1. **段階的実行**: 上記7ステップを順番に実行
2. **進捗報告**: 各ステップ完了時に状況を報告
3. **エラーハンドリング**: 失敗時は代替手段を提案
4. **完了通知**: 初期化完了後、ユーザーに作業ディレクトリを明確に伝達

## TODO作成のガイドライン

各ステップは以下の方針でTODOリストに追加してください：

- **ステップ1-3**: 単一タスクとして作成
- **ステップ4**: テンプレートファイル毎に分割可能
- **ステップ6**: 調査項目毎に分割推奨（4-5個のタスク）
- **ステップ7**: README各セクション毎に分割推奨（5個のタスク）

**推奨TODO総数**: 12-15個のタスク

## 初期化後の独立作業について

初期化完了後、`competitions/[competition-name]/`は完全に独立した作業環境となります：

- **独立したuv環境**: コンペ専用の依存関係管理
- **カスタムコマンド**: Discussion更新チェックなどの専用ワークフロー  
- **優勝戦略README**: 2024年最新の勝利手法を含む包括的な戦略ガイド
- **マザーリポジトリとの分離**: 今後マザーリポジトリへの依存なし

**注意**: 
- Kaggle API の認証設定（`~/.kaggle/kaggle.json`）が必要
- 初期化は設定とREADME生成に特化、実際の分析は行わない
- 全ての分析・モデリング作業は初期化後にコンペディレクトリ内で実行